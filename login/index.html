<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <title>Login - Acesso à Jornada 30 Dias</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <style>
      /* Estilos base, SÓ para o layout do card */
      body {
        font-family: 'Inter', sans-serif;
        background-color: #111827; /* bg-gray-900 */
      }
      /* Removemos quase todo o CSS daqui para confiar 100% no JavaScript para a estilização do widget */
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-sm mx-auto bg-gray-800 rounded-xl shadow-2xl p-8 space-y-6">
        <div class="text-center">
            <h1 class="text-2xl font-bold text-emerald-400">Jornada 30 Dias</h1>
            <p class="text-gray-400 mt-2">Acesso à sua área exclusiva</p>
        </div>

        <div id="login-container" data-netlify-identity-menu></div>
    </div>

    <script type="text/javascript">
      if (window.netlifyIdentity) {
        netlifyIdentity.on('login', user => {
          window.location.replace('/desafio/');
        });
        if (netlifyIdentity.currentUser()) {
           window.location.replace('/desafio/');
        }
      }
    </script>

    <script>
    // Função que aplica os estilos desejados
    function styleNetlifyWidget() {
      // **IMPORTANTE**: Verifique no "Inspecionar Elemento" se a classe do botão é realmente '.btn-primary'.
      // Se for diferente, troque o seletor abaixo pelo que você encontrou.
      const buttons = document.querySelectorAll('#login-container .btn-primary');
      
      if (buttons.length > 0) {
        buttons.forEach(button => {
          // Força a aplicação dos estilos diretamente no elemento
          button.style.setProperty('background-color', '#10B981', 'important');
          button.style.setProperty('border', 'none', 'important');
          button.style.setProperty('border-radius', '0.5rem', 'important');
          button.style.setProperty('color', 'white', 'important');
          button.style.setProperty('font-weight', '600', 'important');
          button.style.setProperty('width', '100%', 'important');
          button.style.setProperty('text-align', 'center', 'important');
          button.style.setProperty('padding', '0.75rem 1rem', 'important');
        });
      }

      // Estiliza o link secundário (Ex: "Already have an account? Log in")
      const noteLink = document.querySelector('#login-container .netlify-identity-form-note a');
      if (noteLink) {
          noteLink.style.setProperty('display', 'inline-block', 'important');
          noteLink.style.setProperty('width', '100%', 'important');
          noteLink.style.setProperty('background-color', 'transparent', 'important');
          noteLink.style.setProperty('border', '2px solid #10B981', 'important');
          noteLink.style.setProperty('color', '#10B981', 'important');
          noteLink.style.setProperty('border-radius', '0.5rem', 'important');
          noteLink.style.setProperty('padding', '0.75rem 1rem', 'important');
          noteLink.style.setProperty('text-align', 'center', 'important');
          noteLink.style.setProperty('margin-top', '1.5rem', 'important');
      }

      // Estiliza os inputs
      const inputs = document.querySelectorAll('#login-container .netlify-identity-input');
      inputs.forEach(input => {
          input.style.setProperty('background-color', '#374151', 'important');
          input.style.setProperty('border', '1px solid #4B5563', 'important');
          input.style.setProperty('color', '#F3F4F6', 'important');
      });
    }

    // Ouve os eventos do widget da Netlify
    if (window.netlifyIdentity) {
      // Tenta estilizar quando o widget é aberto (seja para login ou signup)
      netlifyIdentity.on('open', () => {
        // Usa um pequeno atraso para garantir que os elementos já foram renderizados
        setTimeout(styleNetlifyWidget, 100);
      });
    }
    </script>
</body>
</html>